import type { InferGetStaticPropsType, NextPage } from 'next';
import Head from 'next/head';
import { getPlaiceholder } from 'plaiceholder';
import { Element } from 'react-scroll';
import Contact from 'src/components/Contact';
import Info from 'src/components/Info';
import Layout from 'src/components/Layout';
import Projects from 'src/components/Projects';
import Slider from 'src/components/Slider';

const Home: NextPage<InferGetStaticPropsType<typeof getStaticProps>> = ({
    sliderImages,
}) => {
    return (
        <>
            <Head>
                <title>Chinta</title>
                <meta
                    name="description"
                    content="Generated by create next app"
                />
                <link rel="icon" href="/favicon.ico" />
            </Head>
            <Layout>
                <main className="section-wrapper">
                    <Slider sliderImages={sliderImages} />
                    <Element
                        name="projects"
                        className=" section project-section"
                    >
                        <Projects />
                    </Element>
                    <Info />
                    <Element name="contact" className="contact-section">
                        <Contact />
                    </Element>
                </main>
            </Layout>
        </>
    );
};

export const getStaticProps = async () => {
    const images = [
        {
            image: '/sliders/1.jpg',
            alt: 'alternative data',
        },
        {
            image: '/sliders/2.jpg',
            alt: 'alternative data',
        },
        {
            image: '/sliders/3.jpg',
            alt: 'alternative data',
        },
        {
            image: '/sliders/4.jpg',
            alt: 'alternative data',
        },
        {
            image: '/sliders/5.jpg',
            alt: 'alternative data',
        },
        {
            image: '/sliders/6.jpg',
            alt: 'alternative data',
        },
        {
            image: '/sliders/7.jpg',
            alt: 'alternative data',
        },
        {
            image: '/sliders/8.jpg',
            alt: 'alternative data',
        },
    ];

    const sliderImages = await Promise.all(
        images.map(async (data) => {
            const { base64, img } = await getPlaiceholder(data.image);
            return {
                ...img,
                base64: base64,
                alt: data.alt,
            };
        })
    ).then((value) => value);

    return {
        props: {
            sliderImages,
        },
    };
};

export default Home;
